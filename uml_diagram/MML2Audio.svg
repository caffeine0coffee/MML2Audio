<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="613px" preserveAspectRatio="none" style="width:822px;height:613px;background:#FFFFFF;" version="1.1" viewBox="0 0 822 613" width="822px" zoomAndPan="magnify"><defs><filter height="300%" id="ff84yao0yf58u" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="101" x="354" y="15.8379">MML2Audio</text><!--MD5=[df0b49b3bcea4a1034e7e56a9608b471]
cluster Channel--><polygon fill="#FFFFFF" filter="url(#ff84yao0yf58u)" points="395,35,459.0625,35,466.0625,55,591,55,591,381.5,395,381.5,395,35" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="395" x2="466.0625" y1="55" y2="55"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="58.0625" x="399" y="49.3184">Channel</text><!--MD5=[9d80a1fe43515622cfad4f8fcb763eef]
cluster Note--><polygon fill="#FFFFFF" filter="url(#ff84yao0yf58u)" points="615,24,654.75,24,661.75,44,805,44,805,387,615,387,615,24" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="615" x2="661.75" y1="44" y2="44"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="33.75" x="619" y="38.3184">Note</text><!--MD5=[a55135535b5c544b99c33b17428c3b14]
cluster Util--><polygon fill="#FFFFFF" filter="url(#ff84yao0yf58u)" points="16,443,46.75,443,53.75,463,176,463,176,606,16,606,16,443" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="53.75" y1="463" y2="463"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="24.75" x="20" y="457.3184">Util</text><!--MD5=[1e4e6ac1845d89d680410515caa0c0ac]
class Channel--><rect codeLine="39" fill="#FEFECE" filter="url(#ff84yao0yf58u)" height="70" id="Channel" style="stroke:#A80036;stroke-width:1.5;" width="158" x="414" y="295.5"/><ellipse cx="465.25" cy="311.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M468.9688,313.6406 Q468.5781,318.4688 465.3281,318.4688 Q463.4219,318.4688 462.3906,316.5156 Q461.5313,314.8594 461.5313,311.9375 Q461.5313,308.9531 462.4844,307.1875 Q463.4688,305.3594 465.3281,305.3594 Q468.2969,305.3594 468.9063,309.6406 L466.9688,309.6406 Q466.6094,307.1719 465.3281,307.1719 Q463.5156,307.1719 463.5156,311.9375 Q463.5156,316.6563 465.3438,316.6563 Q466.8594,316.6563 467.0156,313.6406 L468.9688,313.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="47" x="485.75" y="316.0586">Channel</text><line style="stroke:#A80036;stroke-width:1.5;" x1="415" x2="571" y1="327.5" y2="327.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="422" y="335.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="132" x="434" y="341.1787">noteList: ArrayList&lt;Note&gt;</text><line style="stroke:#A80036;stroke-width:1.5;" x1="415" x2="571" y1="346.5" y2="346.5"/><ellipse cx="425" cy="357.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="53" x="434" y="360.1787">addNote()</text><!--MD5=[0a79a2c91c256eee5d0d5797dce1dd1c]
class ChannelBuilder--><rect codeLine="45" fill="#FEFECE" filter="url(#ff84yao0yf58u)" height="125" id="ChannelBuilder" style="stroke:#A80036;stroke-width:1.5;" width="164" x="411" y="68"/><ellipse cx="446.7" cy="84" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M450.4188,86.1406 Q450.0281,90.9688 446.7781,90.9688 Q444.8719,90.9688 443.8406,89.0156 Q442.9813,87.3594 442.9813,84.4375 Q442.9813,81.4531 443.9344,79.6875 Q444.9188,77.8594 446.7781,77.8594 Q449.7469,77.8594 450.3563,82.1406 L448.4188,82.1406 Q448.0594,79.6719 446.7781,79.6719 Q444.9656,79.6719 444.9656,84.4375 Q444.9656,89.1563 446.7938,89.1563 Q448.3094,89.1563 448.4656,86.1406 L450.4188,86.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="86" x="465.3" y="88.5586">ChannelBuilder</text><line style="stroke:#A80036;stroke-width:1.5;" x1="412" x2="574" y1="100" y2="100"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="419" y="108"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="42" x="431" y="113.6787">channel</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="419" y="119"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="78" x="431" y="124.6787">currentVolume</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="419" y="130"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="74" x="431" y="135.6787">currentOctave</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="419" y="141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="138" x="431" y="146.6787">currentDefaultToneLength</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="419" y="152"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="127" x="431" y="157.6787">currentWaveGeneratorId</text><line style="stroke:#A80036;stroke-width:1.5;" x1="412" x2="574" y1="163" y2="163"/><ellipse cx="422" cy="174" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="67" x="431" y="176.6787">setChannel()</text><ellipse cx="422" cy="185" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="53" x="431" y="187.6787">addNote()</text><!--MD5=[5d3c9bb25b1b07c105e03cfa5bc0b7ee]
class Note--><rect codeLine="58" fill="#FEFECE" filter="url(#ff84yao0yf58u)" height="147" id="Note" style="stroke:#A80036;stroke-width:1.5;" width="113" x="642.5" y="57"/><ellipse cx="681.8" cy="73" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M685.5188,75.1406 Q685.1281,79.9688 681.8781,79.9688 Q679.9719,79.9688 678.9406,78.0156 Q678.0813,76.3594 678.0813,73.4375 Q678.0813,70.4531 679.0344,68.6875 Q680.0188,66.8594 681.8781,66.8594 Q684.8469,66.8594 685.4563,71.1406 L683.5188,71.1406 Q683.1594,68.6719 681.8781,68.6719 Q680.0656,68.6719 680.0656,73.4375 Q680.0656,78.1563 681.8938,78.1563 Q683.4094,78.1563 683.5656,75.1406 L685.5188,75.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="27" x="701.2" y="77.5586">Note</text><line style="stroke:#A80036;stroke-width:1.5;" x1="643.5" x2="754.5" y1="89" y2="89"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="650.5" y="97"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="54" x="662.5" y="102.6787">scaleIndex</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="650.5" y="108"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="54" x="662.5" y="113.6787">noteName</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="650.5" y="119"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="662.5" y="124.6787">freq</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="650.5" y="130"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="60" x="662.5" y="135.6787">toneLength</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="650.5" y="141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="38" x="662.5" y="146.6787">volume</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="650.5" y="152"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="34" x="662.5" y="157.6787">octave</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="650.5" y="163"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="87" x="662.5" y="168.6787">waveGeneratorId</text><line style="stroke:#A80036;stroke-width:1.5;" x1="643.5" x2="754.5" y1="174" y2="174"/><ellipse cx="653.5" cy="185" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="42" x="662.5" y="187.6787">equals()</text><ellipse cx="653.5" cy="196" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="49" x="662.5" y="198.6787">toString()</text><!--MD5=[8f87c71688acaff73fbf556b6f1990fc]
class NoteNameConverter--><rect codeLine="71" fill="#FEFECE" filter="url(#ff84yao0yf58u)" height="81" id="NoteNameConverter" style="stroke:#A80036;stroke-width:1.5;" width="157" x="631.5" y="290"/><ellipse cx="651" cy="306" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M654.7188,308.1406 Q654.3281,312.9688 651.0781,312.9688 Q649.1719,312.9688 648.1406,311.0156 Q647.2813,309.3594 647.2813,306.4375 Q647.2813,303.4531 648.2344,301.6875 Q649.2188,299.8594 651.0781,299.8594 Q654.0469,299.8594 654.6563,304.1406 L652.7188,304.1406 Q652.3594,301.6719 651.0781,301.6719 Q649.2656,301.6719 649.2656,306.4375 Q649.2656,311.1563 651.0938,311.1563 Q652.6094,311.1563 652.7656,308.1406 L654.7188,308.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="115" x="666" y="310.5586">NoteNameConverter</text><line style="stroke:#A80036;stroke-width:1.5;" x1="632.5" x2="787.5" y1="322" y2="322"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="639.5" y="330"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="49" x="651.5" y="335.6787">scaleMap</text><line style="stroke:#A80036;stroke-width:1.5;" x1="632.5" x2="787.5" y1="341" y2="341"/><ellipse cx="642.5" cy="352" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="131" x="651.5" y="354.6787">noteNameToScaleIndex()</text><ellipse cx="642.5" cy="363" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="131" x="651.5" y="365.6787">scaleIndexToNoteName()</text><!--MD5=[063d74e43144aaa0d0cf3aecd3794497]
class Log--><rect codeLine="80" fill="#FEFECE" filter="url(#ff84yao0yf58u)" height="114" id="Log" style="stroke:#A80036;stroke-width:1.5;" width="128" x="32" y="476"/><ellipse cx="81.75" cy="492" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M85.4688,494.1406 Q85.0781,498.9688 81.8281,498.9688 Q79.9219,498.9688 78.8906,497.0156 Q78.0313,495.3594 78.0313,492.4375 Q78.0313,489.4531 78.9844,487.6875 Q79.9688,485.8594 81.8281,485.8594 Q84.7969,485.8594 85.4063,490.1406 L83.4688,490.1406 Q83.1094,487.6719 81.8281,487.6719 Q80.0156,487.6719 80.0156,492.4375 Q80.0156,497.1563 81.8438,497.1563 Q83.3594,497.1563 83.5156,494.1406 L85.4688,494.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="102.25" y="496.5586">Log</text><line style="stroke:#A80036;stroke-width:1.5;" x1="33" x2="159" y1="508" y2="508"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="40" y="516"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="75" x="52" y="521.6787">logOutputFlag</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="40" y="527"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="79" x="52" y="532.6787">infoOutputFlag</text><line style="stroke:#A80036;stroke-width:1.5;" x1="33" x2="159" y1="538" y2="538"/><ellipse cx="43" cy="549" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="101" x="52" y="551.6787">setLogOutputFlag()</text><ellipse cx="43" cy="560" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="102" x="52" y="562.6787">setInfoOutputFlag()</text><ellipse cx="43" cy="571" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="24" x="52" y="573.6787">log()</text><ellipse cx="43" cy="582" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="28" x="52" y="584.6787">info()</text><!--MD5=[84718776d214be480e4c259efcb737fc]
class Main--><rect codeLine="3" fill="#FEFECE" filter="url(#ff84yao0yf58u)" height="103" id="Main" style="stroke:#A80036;stroke-width:1.5;" width="117" x="37.5" y="279"/><ellipse cx="78.15" cy="295" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M81.8688,297.1406 Q81.4781,301.9688 78.2281,301.9688 Q76.3219,301.9688 75.2906,300.0156 Q74.4313,298.3594 74.4313,295.4375 Q74.4313,292.4531 75.3844,290.6875 Q76.3688,288.8594 78.2281,288.8594 Q81.1969,288.8594 81.8063,293.1406 L79.8688,293.1406 Q79.5094,290.6719 78.2281,290.6719 Q76.4156,290.6719 76.4156,295.4375 Q76.4156,300.1563 78.2438,300.1563 Q79.7594,300.1563 79.9156,297.1406 L81.8688,297.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="28" x="97.85" y="299.5586">Main</text><line style="stroke:#A80036;stroke-width:1.5;" x1="38.5" x2="153.5" y1="311" y2="311"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="45.5" y="319"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="83" x="57.5" y="324.6787">inputFile: String</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="45.5" y="330"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="91" x="57.5" y="335.6787">outputFile: String</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="45.5" y="341"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="48" x="57.5" y="346.6787">quietFlag</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="45.5" y="352"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="61" x="57.5" y="357.6787">verboseFlag</text><line style="stroke:#A80036;stroke-width:1.5;" x1="38.5" x2="153.5" y1="363" y2="363"/><ellipse cx="48.5" cy="374" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="34" x="57.5" y="376.6787">main()</text><!--MD5=[f1ec3f79efb0fc13b8283411293f9a6c]
class Music--><rect codeLine="12" fill="#FEFECE" filter="url(#ff84yao0yf58u)" height="125" id="Music" style="stroke:#A80036;stroke-width:1.5;" width="176" x="214" y="470.5"/><ellipse cx="280.75" cy="486.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M284.4688,488.6406 Q284.0781,493.4688 280.8281,493.4688 Q278.9219,493.4688 277.8906,491.5156 Q277.0313,489.8594 277.0313,486.9375 Q277.0313,483.9531 277.9844,482.1875 Q278.9688,480.3594 280.8281,480.3594 Q283.7969,480.3594 284.4063,484.6406 L282.4688,484.6406 Q282.1094,482.1719 280.8281,482.1719 Q279.0156,482.1719 279.0156,486.9375 Q279.0156,491.6563 280.8438,491.6563 Q282.3594,491.6563 282.5156,488.6406 L284.4688,488.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="301.25" y="491.0586">Music</text><line style="stroke:#A80036;stroke-width:1.5;" x1="215" x2="389" y1="502.5" y2="502.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="222" y="510.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="142" x="234" y="516.1787">audioFormat: AudioFormat</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="222" y="521.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="24" x="234" y="527.1787">bpm</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="222" y="532.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="150" x="234" y="538.1787">channelList: ArrayList&lt;Note&gt;</text><ellipse cx="225" cy="546.5" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="108" x="234" y="549.1787">MIN_TONE_LENGTH</text><ellipse cx="225" cy="557.5" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="77" x="234" y="560.1787">SAMPLE_RATE</text><line style="stroke:#A80036;stroke-width:1.5;" x1="215" x2="389" y1="565.5" y2="565.5"/><ellipse cx="225" cy="576.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="72" x="234" y="579.1787">addChannel()</text><ellipse cx="225" cy="587.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="114" x="234" y="590.1787">generateAudioBuffer()</text><!--MD5=[4818d226c150eb2f69e175cc12032319]
class MmlReader--><rect codeLine="23" fill="#FEFECE" filter="url(#ff84yao0yf58u)" height="70" id="MmlReader" style="stroke:#A80036;stroke-width:1.5;" width="154" x="225" y="295.5"/><ellipse cx="266.1" cy="311.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M269.8188,313.6406 Q269.4281,318.4688 266.1781,318.4688 Q264.2719,318.4688 263.2406,316.5156 Q262.3813,314.8594 262.3813,311.9375 Q262.3813,308.9531 263.3344,307.1875 Q264.3188,305.3594 266.1781,305.3594 Q269.1469,305.3594 269.7563,309.6406 L267.8188,309.6406 Q267.4594,307.1719 266.1781,307.1719 Q264.3656,307.1719 264.3656,311.9375 Q264.3656,316.6563 266.1938,316.6563 Q267.7094,316.6563 267.8656,313.6406 L269.8188,313.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="64" x="285.9" y="316.0586">MmlReader</text><line style="stroke:#A80036;stroke-width:1.5;" x1="226" x2="378" y1="327.5" y2="327.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="226" x2="378" y1="335.5" y2="335.5"/><ellipse cx="236" cy="346.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="79" x="245" y="349.1787">mmlCompiler()</text><ellipse cx="236" cy="357.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="128" x="245" y="360.1787">convertMmlToChannel()</text><!--MD5=[6f06aa8621b4533146a5db59ca431a7f]
class WaveGenerator--><rect codeLine="28" fill="#FEFECE" filter="url(#ff84yao0yf58u)" height="114" id="WaveGenerator" style="stroke:#A80036;stroke-width:1.5;" width="193" x="460.5" y="476"/><ellipse cx="509.25" cy="492" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M512.9688,494.1406 Q512.5781,498.9688 509.3281,498.9688 Q507.4219,498.9688 506.3906,497.0156 Q505.5313,495.3594 505.5313,492.4375 Q505.5313,489.4531 506.4844,487.6875 Q507.4688,485.8594 509.3281,485.8594 Q512.2969,485.8594 512.9063,490.1406 L510.9688,490.1406 Q510.6094,487.6719 509.3281,487.6719 Q507.5156,487.6719 507.5156,492.4375 Q507.5156,497.1563 509.3438,497.1563 Q510.8594,497.1563 511.0156,494.1406 L512.9688,494.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="87" x="529.75" y="496.5586">WaveGenerator</text><line style="stroke:#A80036;stroke-width:1.5;" x1="461.5" x2="652.5" y1="508" y2="508"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="468.5" y="516"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="100" x="480.5" y="521.6787">waveGeneratorMap</text><line style="stroke:#A80036;stroke-width:1.5;" x1="461.5" x2="652.5" y1="527" y2="527"/><ellipse cx="471.5" cy="538" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="23" x="480.5" y="540.6787">sin()</text><ellipse cx="471.5" cy="549" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="43" x="480.5" y="551.6787">square()</text><ellipse cx="471.5" cy="560" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="56" x="480.5" y="562.6787">sawtooth()</text><ellipse cx="471.5" cy="571" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="36" x="480.5" y="573.6787">noise()</text><ellipse cx="471.5" cy="582" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="167" x="480.5" y="584.6787">getWaveGenerator(): BiFunction</text><!--MD5=[7c5a0d0eb33e53c81306f551f5089afd]
link Main to MmlReader--><path codeLine="91" d="M154.76,330.5 C176.52,330.5 201.53,330.5 224.7,330.5 " fill="none" id="Main-MmlReader" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#000000" points="181.75,320,172.7049,317.0611,172.7049,322.9389,181.75,320" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="185.75" y="324.9385">use</text><!--MD5=[1f5daca7397abe2f9c9a766626a50aeb]
link Main to Music--><path codeLine="92" d="M147.98,382.09 C175.52,408.89 209.56,442.02 238.63,470.32 " fill="none" id="Main-Music" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#000000" points="200.583,422.9874,196.1511,414.5726,192.0514,418.7847,200.583,422.9874" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="206" y="424.4385">own</text><!--MD5=[b9e56bcd821acd0a7a221ea3493b2288]
link Main to Log--><path codeLine="93" d="M96,382.09 C96,410.63 96,446.35 96,475.77 " fill="none" id="Main-Log" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#000000" points="101,424.5,103.9389,415.4549,98.0611,415.4549,101,424.5" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="110" y="424.4385">init</text><!--MD5=[5aa2cddaf3576808775e533f1220ea70]
link ChannelBuilder to Channel--><path codeLine="95" d="M493,193.06 C493,226.78 493,267.29 493,295.37 " fill="none" id="ChannelBuilder-Channel" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#000000" points="498,246.5,500.9389,237.4549,495.0611,237.4549,498,246.5" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="28" x="507" y="246.4385">have</text><!--MD5=[949ae129aab14d8d27d7e81245a7dff9]
link Channel to Music--><path codeLine="96" d="M460.6,365.51 C435.8,391.54 400.73,428.36 369.87,460.76 " fill="none" id="Channel-to-Music" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="360.86,470.21,367.8937,468.6203,369.1316,461.5163,362.0979,463.1059,360.86,470.21" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="430.3269" y="384.8613">0..n</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="358.8603" y="461.0699">1</text><!--MD5=[d479991b6450568d7bb7bf668d74b05f]
link Note to Channel--><path codeLine="97" d="M642.44,185.87 C609.55,217.48 568.67,256.77 537.99,286.26 " fill="none" id="Note-to-Channel" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="528.41,295.47,535.5082,294.199,537.0651,287.158,529.9669,288.429,528.41,295.47" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="612.6284" y="189.9591">0..n</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="526.3975" y="285.9918">1</text><!--MD5=[9c53cb603286454295383df3fdd9f7f1]
link ChannelBuilder to MmlReader--><path codeLine="99" d="M433.61,193.06 C404.65,223.09 370.48,258.51 344.22,285.73 " fill="none" id="ChannelBuilder-to-MmlReader" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="334.93,295.37,341.9747,293.8297,343.2623,286.7345,336.2176,288.2748,334.93,295.37" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[3194c8e74ee129718f11074e1a9515ba]
link Note to NoteNameConverter--><path codeLine="101" d="M703.03,204.1 C704.65,233.13 706.44,265.42 707.8,289.97 " fill="none" id="Note-NoteNameConverter" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#000000" points="710.2773,246.4923,712.71,237.2981,706.8412,237.6241,710.2773,246.4923" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="719" y="246.4385">use</text><!--MD5=[2d8a3286c922fdb880a561c0d1f6fa92]
link Music to WaveGenerator--><path codeLine="103" d="M390.11,533 C412.72,533 437.15,533 460.16,533 " fill="none" id="Music-WaveGenerator" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#000000" points="417.25,522.5,408.2049,519.5611,408.2049,525.4389,417.25,522.5" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="421.25" y="527.4385">use</text><!--MD5=[406d0bd2b9dcec8b8db0d7a4131746c9]
link MmlReader to Music--><path codeLine="105" d="M302,365.51 C302,390.54 302,425.53 302,456.98 " fill="none" id="MmlReader-to-Music" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="302,470.21,306,464.21,302,458.21,298,464.21,302,470.21" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[4168a4177dfe8301e7085943304c78ac]
@startuml MML2Audio
title MML2Audio

class Main {
    - {static} inputFile: String
    - {static} outputFile: String
    - {static} quietFlag
    - {static} verboseFlag

    + {static} main()
}

class Music {
    - audioFormat: AudioFormat
    - bpm
    - channelList: ArrayList<Note>
    + MIN_TONE_LENGTH
    + SAMPLE_RATE

    + addChannel()
    + generateAudioBuffer()
}

class MmlReader {
    + {static} mmlCompiler()
    + {static} convertMmlToChannel()
}

class WaveGenerator {
    - {static} waveGeneratorMap

    + {static} sin()
    + {static} square()
    + {static} sawtooth()
    + {static} noise()
    + {static} getWaveGenerator(): BiFunction
}

package Channel {
    class Channel {
        - noteList: ArrayList<Note>

        + addNote()
    }

    class ChannelBuilder {
        - channel
        - currentVolume
        - currentOctave
        - currentDefaultToneLength
        - currentWaveGeneratorId

        + setChannel()
        + addNote()
    }
}

package Note {
    class Note {
        - scaleIndex
        - noteName
        - freq
        - toneLength
        - volume
        - octave
        - waveGeneratorId

        + equals()
        + toString()
    }

    class NoteNameConverter {
        - {static} scaleMap

        + {static} noteNameToScaleIndex()
        + {static} scaleIndexToNoteName()
    }
}

package Util {
    class Log {
        - {static} logOutputFlag
        - {static} infoOutputFlag

        + {static} setLogOutputFlag()
        + {static} setInfoOutputFlag()
        + {static} log()
        + {static} info()
    }
}

Main - MmlReader: use >
Main - Music: own >
Main - - Log: init >

ChannelBuilder - - Channel: have >
Channel "0..n" - -o "1" Music
Note "0..n" - -o "1" Channel

ChannelBuilder - -* MmlReader

Note - - NoteNameConverter: use >

Music - WaveGenerator: use >

MmlReader - -* Music

@enduml

PlantUML version 1.2022.0(Wed Jan 12 01:16:42 JST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>